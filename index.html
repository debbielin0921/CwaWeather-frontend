<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>å°ç¿æš–æš–å¤©æ°£ç«™</title>
<link rel="icon" type="image/png" href="./icon-v2.png" />
<link rel="apple-touch-icon" href="./icon-v2.png" />
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet" />
<style>
:root {
  --warm-pink: #ffb7c5;
  --warm-peach: #ffd9b3;
  --warm-yellow: #ffe9a7;
  --warm-cream: #fffaf0;
  --warm-brown: #7a5548;
  --warm-orange: #ffb774;
  --card-border: #ffe7cc;
}
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}
body {
  font-family: "Zen Maru Gothic", sans-serif;
  background-color: var(--warm-peach);
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 25px,
    rgba(255, 255, 255, 0.3) 25px,
    rgba(255, 255, 255, 0.3) 50px
  );
  min-height: 100vh;
  overflow-x: hidden;
  padding-bottom: 20px;
  color: var(--warm-brown);
}
.status-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background: rgba(255, 255, 255, 0.4);
  backdrop-filter: blur(10px);
  position: sticky;
  top: 0;
  z-index: 100;
}
.location-pill {
  background: var(--warm-yellow);
  color: var(--warm-brown);
  padding: 6px 16px;
  border-radius: 25px;
  font-weight: 900;
  font-size: 1.1rem;
  border: 2px solid #fff;
  box-shadow: 2px 3px 0 rgba(0, 0, 0, 0.1);
}
.update-pill {
  font-size: 0.8rem;
  color: #fff;
  background: rgba(0, 0, 0, 0.25);
  padding: 4px 12px;
  border-radius: 12px;
}
.container {
  padding: 20px;
  max-width: 600px;
  margin: auto;
}
.hero-card {
  background: var(--warm-cream);
  border-radius: 35px;
  padding: 35px 25px;
  text-align: center;
  border: 4px solid #fff;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  margin-bottom: 25px;
  position: relative;
}
.hero-period {
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--warm-pink);
  color: white;
  padding: 6px 20px;
  border-radius: 20px;
  border: 3px solid white;
  font-weight: 700;
  box-shadow: 0 4px 0 rgba(0, 0, 0, 0.1);
}
.hero-temp-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin: 20px 0;
}
.hero-icon {
  font-size: 4.5rem;
  filter: drop-shadow(0 4px 0 rgba(0, 0, 0, 0.15));
  animation: wiggle 2.8s infinite;
}
@keyframes wiggle {
  0%, 100% { transform: rotate(0); }
  50% { transform: rotate(6deg); }
}
.hero-temp {
  font-size: 4rem;
  font-weight: 900;
  color: var(--warm-brown);
}
.hero-desc {
  font-size: 1.5rem;
  color: #a2786a;
  margin-bottom: 18px;
  font-weight: bold;
}
.advice-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  margin-top: 20px;
  padding-top: 20px;
  border-top: 2px dashed #f2dcc5;
}
.advice-item {
  background: rgba(255, 255, 255, 0.65);
  padding: 12px;
  border-radius: 22px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.advice-icon {
  font-size: 2.2rem;
}
.advice-text {
  font-size: 1.2rem;
  font-weight: 900;
  color: var(--warm-brown);
  margin: 5px 0;
}
.section-title {
  font-size: 1.2rem;
  color: white;
  margin-bottom: 12px;
  font-weight: 900;
  margin-left: 10px;
  text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.15);
}
.scroll-container {
  display: flex;
  overflow-x: auto;
  gap: 15px;
  padding-bottom: 10px;
  scrollbar-width: none;
}
.scroll-container::-webkit-scrollbar {
  display: none;
}
.mini-card {
  min-width: 140px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 25px;
  padding: 20px 15px;
  text-align: center;
  border: 3px solid white;
  flex-shrink: 0;
}
.mini-time {
  background: var(--warm-orange);
  color: white;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 0.8rem;
  margin-bottom: 10px;
  font-weight: bold;
}
.mini-icon {
  font-size: 2.4rem;
  margin: 5px 0;
}
.mini-temp {
  font-size: 1.2rem;
  font-weight: 800;
  color: var(--warm-brown);
}
.loading-screen {
  position: fixed;
  inset: 0;
  background: var(--warm-peach);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 999;
}
</style>
</head>
<body>
<div id="loading" class="loading-screen">
  <div style="font-size: 4rem; animation: wiggle 2s infinite;">ğŸŒ¤ï¸</div>
  <p style="color: white; font-weight: bold; margin-top: 20px;">æ­£åœ¨çƒ¤å¤ªé™½é¤…ä¸­...</p>
</div>
<div class="status-bar">
  <div class="location-pill">ğŸ“ å°ä¸­</div>
  <div id="updateTime" class="update-pill">æ›´æ–°ä¸­...</div>
</div>
<div class="container" id="mainContent" style="display:none;">
  <div id="heroCard"></div>
  <h3 class="section-title">ç¨å¾Œé å ±</h3>
  <div class="scroll-container" id="futureForecasts"></div>
</div>
<script>
const API_URL = "https://weather-houli.zeabur.app/api/weather/kaohsiung";
function getWeatherIcon(weather){
  if(!weather) return "ğŸŒ¤ï¸";
  if(weather.includes("æ™´")) return "â˜€ï¸";
  if(weather.includes("å¤šé›²")) return "â›…";
  if(weather.includes("é™°")) return "â˜ï¸";
  if(weather.includes("é›¨")) return "ğŸŒ§ï¸";
  if(weather.includes("é›·")) return "â›ˆï¸";
  return "ğŸŒ¤ï¸";
}
function getAdvice(rainProb,maxTemp){
  let rainIcon="ğŸŒ¸", rainText="ä¸ç”¨å¸¶å‚˜";
  if(parseInt(rainProb)>30){ rainIcon="â˜‚ï¸"; rainText="å°å¿ƒä¸‹é›¨å”·ï¼"; }
  let clothIcon="ğŸ‘•", clothText="æ¶¼çˆ½ç©¿æ­";
  if(parseInt(maxTemp)>=28){ clothIcon="ğŸ©³"; clothText="çŸ­è¢–çŸ­è¤²ï¼"; }
  else if(parseInt(maxTemp)<=20){ clothIcon="ğŸ§¥"; clothText="è¨˜å¾—å¤–å¥—ï½"; }
  return{rainIcon,rainText,clothIcon,clothText};
}
function getTimePeriod(t){
  const h=new Date(t).getHours();
  if(h>=5&&h<11)return"æ—©æ™¨";
  if(h>=11&&h<14)return"ä¸­åˆ";
  if(h>=14&&h<18)return"ä¸‹åˆ";
  if(h>=18&&h<23)return"æ™šä¸Š";
  return"æ·±å¤œ";
}
function renderWeather(data){
  const forecasts=data.forecasts;
  const current=forecasts[0];
  const others=forecasts.slice(1);
  const advice=getAdvice(current.rain,current.maxTemp);
  const period=getTimePeriod(current.startTime);
  const avgTemp=Math.round((parseInt(current.maxTemp)+parseInt(current.minTemp))/2);
  document.getElementById("heroCard").innerHTML=`
    <div class="hero-card">
      <div class="hero-period">${period}</div>
      <div class="hero-temp-container">
        <div class="hero-icon">${getWeatherIcon(current.weather)}</div>
        <div class="hero-temp">${avgTemp}Â°</div>
      </div>
      <div class="hero-desc">${current.weather}</div>
      <div class="advice-grid">
        <div class="advice-item">
          <div class="advice-icon">${advice.rainIcon}</div>
          <div class="advice-text">${advice.rainText}</div>
          <div style="font-size:0.7rem;color:#a88">é™é›¨ç‡ ${current.rain}</div>
        </div>
        <div class="advice-item">
          <div class="advice-icon">${advice.clothIcon}</div>
          <div class="advice-text">${advice.clothText}</div>
          <div style="font-size:0.7rem;color:#a88">æœ€é«˜æº« ${current.maxTemp}Â°</div>
        </div>
      </div>
    </div>`;
  const today=new Date().getDate();
  const scroll=document.getElementById("futureForecasts");
  scroll.innerHTML="";
  others.forEach(f=>{
    let p=getTimePeriod(f.startTime);
    const fDate=new Date(f.startTime).getDate();
    if(fDate!==today)p="æ˜å¤©"+p;
    scroll.innerHTML+=`
      <div class="mini-card">
        <div class="mini-time">${p}</div>
        <div class="mini-icon">${getWeatherIcon(f.weather)}</div>
        <div class="mini-temp">${f.minTemp}Â° - ${f.maxTemp}Â°</div>
        <div style="font-size:0.8rem;color:#888;margin-top:5px;">ğŸ’§${f.rain}</div>
      </div>`;
  });
  const now=new Date();
  const m=now.getMonth()+1;
  const d=now.getDate();
  const days=["é€±æ—¥","é€±ä¸€","é€±äºŒ","é€±ä¸‰","é€±å››","é€±äº”","é€±å…­"];
  document.getElementById("updateTime").textContent=`${m}æœˆ${d}æ—¥ ${days[now.getDay()]}`;
}
async function fetchWeather(){
  try{
    const delay=new Promise(r=>setTimeout(r,1500));
    const data=fetch(API_URL).then(r=>r.json());
    const[_,json]=await Promise.all([delay,data]);
    if(json.success){
      renderWeather(json.data);
      document.getElementById("loading").style.display="none";
      document.getElementById("mainContent").style.display="block";
    }
  }catch(e){ alert("å¤©æ°£è³‡æ–™è®€å–å¤±æ•—ï¼"); }
}
document.addEventListener("DOMContentLoaded",fetchWeather);
</script>
</body>
</html>
